<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>WebSocket Echo Demo</title>
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <script>
  var ws = new WebSocket("ws://localhost:8001");
  ws.onopen = function (e) {
    console.log('Connection to server opened');
  }
  ws.onmessage = function(e){
    console.log('onmessage' , e );
  }
  ws.onclose = function(e){
      console.log(e.code);
      console.log("socket关闭了")
  }
  ws.onerror = function(e){
      console.log(e);
  }
  ws.on('ping' , (data)=>{
    console.log(data);
  })
  function sendMessage() {
    ws.send($('#message').val());
  }

  </script>
</head>

<body >
  <div class="vertical-center">
    <div class="container">
      <p>&nbsp;</p>
      <form role="form" id="chat_form" onsubmit="sendMessage(); return false;">
        <div class="form-group">
          <input class="form-control" type="text" name="message" id="message"
              placeholder="Type text to echo in here" value="" />
        </div>
        <button type="button" id="send" class="btn btn-primary"
            onclick="sendMessage();">
          Send!
        </button>
      </form>
    </div>
  </div>
</body>
</html>

